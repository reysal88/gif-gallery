<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body{margin:0;background:black;text-align:center;color:white;overflow:hidden}

/* MENU */
#menu{
position:absolute;width:100%;height:100%;
display:flex;justify-content:center;align-items:center;
}

#playImage{
width:160px;
cursor:pointer;
}

/* SPLASH */
#grialo{
position:absolute;width:100%;height:100%;
display:none;justify-content:center;align-items:center;
font-size:40px;color:white;
animation:blink 1s infinite alternate;
}
@keyframes blink{from{opacity:0.5}to{opacity:1}}

canvas{display:none;margin:auto;background:black}
</style>
</head>
<body>

<div id="menu">
<img src="images/title.png" id="playImage">
</div>

<div id="grialo">grialo</div>

<canvas id="game" width="400" height="600"></canvas>

<script>
const canvas=document.getElementById("game");
const ctx=canvas.getContext("2d");
const playImage=document.getElementById("playImage");
const menu=document.getElementById("menu");
const grialo=document.getElementById("grialo");

let gameStarted=false;
let score=0;
let best=localStorage.getItem("best")||0;

/* SHIP */
const ship={x:150,y:500,w:90,h:90};
const shipImg=new Image();
shipImg.src="images/pesawat-logo.png";

/* MONSTER */
const monsters=[];
const monsterImg=new Image();
monsterImg.src="images/monster-logo.png";

/* LASER */
const lasers=[];

/* PLAY CLICK */
playImage.onclick=()=>{
menu.style.display="none";
grialo.style.display="flex";
setTimeout(()=>{
grialo.style.display="none";
canvas.style.display="block";
if(!gameStarted){gameStarted=true;loop();}
},2000);
};

/* DRAG CONTROL */
let dragging=false;
canvas.addEventListener("touchstart",()=>{dragging=true});
canvas.addEventListener("touchmove",e=>{
if(dragging){
let r=canvas.getBoundingClientRect();
ship.x=e.touches[0].clientX-r.left-ship.w/2;
}
});
canvas.addEventListener("touchend",()=>{dragging=false});

/* SHOOT AUTO */
setInterval(()=>{lasers.push({x:ship.x+ship.w/2,y:ship.y});},500);

/* SPAWN MONSTER */
function spawn(){
let count=Math.min(2+Math.floor(score/1000),5);
if(monsters.length>=count) return;

monsters.push({
x:Math.random()*320,
y:-80,
dx:Math.random()<0.5?-1.5:1.5
});
}

/* UPDATE */
function update(){
if(Math.random()<0.01) spawn();

lasers.forEach(l=>l.y-=6);

monsters.forEach((m,i)=>{
m.y+=2;
m.x+=m.dx;
if(m.x<0||m.x>320)m.dx*=-1;

lasers.forEach((l,j)=>{
if(l.x>m.x&&l.x<m.x+80&&l.y>m.y&&l.y<m.y+80){
monsters.splice(i,1);
lasers.splice(j,1);
score+=10;
if(score>best){best=score;localStorage.setItem("best",best);}
}
});
});
}

/* DRAW */
function draw(){
ctx.clearRect(0,0,400,600);

ctx.drawImage(shipImg,ship.x,ship.y,ship.w,ship.h);

ctx.fillStyle="red";
lasers.forEach(l=>ctx.fillRect(l.x,l.y,4,20));

monsters.forEach(m=>{
ctx.drawImage(monsterImg,m.x,m.y,80,80);
});

ctx.fillStyle="white";
ctx.textAlign="center";
ctx.font="18px Arial";
ctx.fillText("Score: "+score,canvas.width/2,30);
ctx.font="14px Arial";
ctx.fillText("Best: "+best,canvas.width/2,50);
}

/* LOOP */
function loop(){
update();
draw();
requestAnimationFrame(loop);
}
</script>

</body>
</html>
